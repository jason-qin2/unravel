{"ast":null,"code":"import _slicedToArray from\"/Users/jason/Desktop/unravel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/*global chrome*/import React,{Component,useState,useEffect}from'react';import rp from\"request-promise\";import{Button,Card,CardHeader,CardBody,CardFooter}from'reactstrap';import ErrorPage from'./ErrorPage';import MaterialPage from'./MaterialPage';import\"./css/popup.css\";import ReactDOM from\"react-dom\";import{Link,BrowserRouter,Route,Switch}from\"react-router-dom\";import{Carousel,CarouselItem,CarouselControl,CarouselIndicators,CarouselCaption}from'reactstrap';var items=[{src:'data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22800%22%20height%3D%22400%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20800%20400%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_15ba800aa1d%20text%20%7B%20fill%3A%23555%3Bfont-weight%3Anormal%3Bfont-family%3AHelvetica%2C%20monospace%3Bfont-size%3A40pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_15ba800aa1d%22%3E%3Crect%20width%3D%22800%22%20height%3D%22400%22%20fill%3D%22%23777%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22285.921875%22%20y%3D%22218.3%22%3EFirst%20slide%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E',altText:'Slide 1',caption:'Slide 1'},{src:'data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22800%22%20height%3D%22400%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20800%20400%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_15ba800aa20%20text%20%7B%20fill%3A%23444%3Bfont-weight%3Anormal%3Bfont-family%3AHelvetica%2C%20monospace%3Bfont-size%3A40pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_15ba800aa20%22%3E%3Crect%20width%3D%22800%22%20height%3D%22400%22%20fill%3D%22%23666%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22247.3203125%22%20y%3D%22218.3%22%3ESecond%20slide%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E',altText:'Slide 2',caption:'Slide 2'},{src:'data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22800%22%20height%3D%22400%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20800%20400%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_15ba800aa21%20text%20%7B%20fill%3A%23333%3Bfont-weight%3Anormal%3Bfont-family%3AHelvetica%2C%20monospace%3Bfont-size%3A40pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_15ba800aa21%22%3E%3Crect%20width%3D%22800%22%20height%3D%22400%22%20fill%3D%22%23555%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22277%22%20y%3D%22218.3%22%3EThird%20slide%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E',altText:'Slide 3',caption:'Slide 3'}];function WebScrape(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),url=_useState2[0],setUrl=_useState2[1];var _useState3=useState([\"NA\"]),_useState4=_slicedToArray(_useState3,2),materials=_useState4[0],setMaterials=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),numMats=_useState6[0],setNumMats=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),toggle=_useState8[0],setToggle=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),noMats=_useState10[0],setNoMats=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),index=_useState12[0],setIndex=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),activeIndex=_useState14[0],setActiveIndex=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),animating=_useState16[0],setAnimating=_useState16[1];var next=function next(){if(animating)return;var nextIndex=activeIndex===items.length-1?0:activeIndex+1;setActiveIndex(nextIndex);};var previous=function previous(){if(animating)return;var nextIndex=activeIndex===0?items.length-1:activeIndex-1;setActiveIndex(nextIndex);};var goToIndex=function goToIndex(newIndex){if(animating)return;setActiveIndex(newIndex);};var slides=items.map(function(item){return/*#__PURE__*/React.createElement(CarouselItem,{onExiting:function onExiting(){return setAnimating(true);},onExited:function onExited(){return setAnimating(false);},key:item.src},/*#__PURE__*/React.createElement(\"img\",{src:item.src,alt:item.altText}),/*#__PURE__*/React.createElement(CarouselCaption,{class:\"carousel-caption\",captionText:item.caption,captionHeader:item.caption}));});useEffect(function(){// use the request-promise library to fetch the HTML from\nchrome.tabs.query({active:true,lastFocusedWindow:true},function(tabs){if(tabs.length>0){console.log(tabs);var _url=tabs[0].url;setUrl(_url);rp(\"http://localhost:8080/\"+_url).then(function(html){var m=[];//console.log(html);\nif(html.includes(\"cotton\")){console.log(\"cotton\");m.push(\"cotton\");}if(html.includes(\"polyester\")){console.log(\"polyester\");m.push(\"polyester\");}if(html.includes(\"wool\")){console.log(\"wool\");m.push(\"wool\");}setMaterials(m);setNumMats(m.length);if(m.length>0){setNoMats(false);}else{setNoMats(true);}}).catch(function(error){return setMaterials([]);});}});});if(materials.length==0){return/*#__PURE__*/React.createElement(ErrorPage,null);}else{return/*#__PURE__*/React.createElement(Carousel,{activeIndex:activeIndex,next:next,previous:previous},/*#__PURE__*/React.createElement(CarouselIndicators,{items:items,activeIndex:activeIndex,onClickHandler:goToIndex}),slides,/*#__PURE__*/React.createElement(CarouselControl,{direction:\"prev\",directionText:\"Previous\",onClickHandler:previous}),/*#__PURE__*/React.createElement(CarouselControl,{direction:\"next\",directionText:\"Next\",onClickHandler:next}));}}export default WebScrape;","map":{"version":3,"sources":["/Users/jason/Desktop/unravel/src/Components/WebScrape.js"],"names":["React","Component","useState","useEffect","rp","Button","Card","CardHeader","CardBody","CardFooter","ErrorPage","MaterialPage","ReactDOM","Link","BrowserRouter","Route","Switch","Carousel","CarouselItem","CarouselControl","CarouselIndicators","CarouselCaption","items","src","altText","caption","WebScrape","url","setUrl","materials","setMaterials","numMats","setNumMats","toggle","setToggle","noMats","setNoMats","index","setIndex","activeIndex","setActiveIndex","animating","setAnimating","next","nextIndex","length","previous","goToIndex","newIndex","slides","map","item","chrome","tabs","query","active","lastFocusedWindow","console","log","_url","then","html","m","includes","push","catch","error"],"mappings":"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","sourcesContent":["/*global chrome*/\nimport React, {Component, useState, useEffect} from 'react';\nimport rp from \"request-promise\";\nimport { Button, Card, CardHeader, CardBody, CardFooter} from 'reactstrap';\nimport ErrorPage from './ErrorPage';\nimport MaterialPage from './MaterialPage';\nimport \"./css/popup.css\";\nimport ReactDOM from \"react-dom\";\nimport { Link, BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport {\n    Carousel,\n    CarouselItem,\n    CarouselControl,\n    CarouselIndicators,\n    CarouselCaption\n  } from 'reactstrap';\n\n  const items = [\n    {\n      src: 'data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22800%22%20height%3D%22400%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20800%20400%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_15ba800aa1d%20text%20%7B%20fill%3A%23555%3Bfont-weight%3Anormal%3Bfont-family%3AHelvetica%2C%20monospace%3Bfont-size%3A40pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_15ba800aa1d%22%3E%3Crect%20width%3D%22800%22%20height%3D%22400%22%20fill%3D%22%23777%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22285.921875%22%20y%3D%22218.3%22%3EFirst%20slide%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E',\n      altText: 'Slide 1',\n      caption: 'Slide 1'\n    },\n    {\n      src: 'data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22800%22%20height%3D%22400%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20800%20400%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_15ba800aa20%20text%20%7B%20fill%3A%23444%3Bfont-weight%3Anormal%3Bfont-family%3AHelvetica%2C%20monospace%3Bfont-size%3A40pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_15ba800aa20%22%3E%3Crect%20width%3D%22800%22%20height%3D%22400%22%20fill%3D%22%23666%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22247.3203125%22%20y%3D%22218.3%22%3ESecond%20slide%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E',\n      altText: 'Slide 2',\n      caption: 'Slide 2'\n    },\n    {\n      src: 'data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22800%22%20height%3D%22400%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20800%20400%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_15ba800aa21%20text%20%7B%20fill%3A%23333%3Bfont-weight%3Anormal%3Bfont-family%3AHelvetica%2C%20monospace%3Bfont-size%3A40pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_15ba800aa21%22%3E%3Crect%20width%3D%22800%22%20height%3D%22400%22%20fill%3D%22%23555%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22277%22%20y%3D%22218.3%22%3EThird%20slide%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E',\n      altText: 'Slide 3',\n      caption: 'Slide 3'\n    }\n  ];\n\nfunction WebScrape() {\n    const [url, setUrl] = useState(\"\");\n    const [materials, setMaterials] = useState([\"NA\"]);\n    const [numMats, setNumMats] = useState(0);\n    const [toggle, setToggle] = useState(true);\n    const [noMats, setNoMats] = useState(false);\n    const [index, setIndex] = useState(0);\n    const [activeIndex, setActiveIndex] = useState(0);\n    const [animating, setAnimating] = useState(false);\n  \n    const next = () => {\n      if (animating) return;\n      const nextIndex = activeIndex === items.length - 1 ? 0 : activeIndex + 1;\n      setActiveIndex(nextIndex);\n    }\n  \n    const previous = () => {\n      if (animating) return;\n      const nextIndex = activeIndex === 0 ? items.length - 1 : activeIndex - 1;\n      setActiveIndex(nextIndex);\n    }\n  \n    const goToIndex = (newIndex) => {\n      if (animating) return;\n      setActiveIndex(newIndex);\n    }\n\n    const slides = items.map((item) => {\n        return (\n          <CarouselItem\n            onExiting={() => setAnimating(true)}\n            onExited={() => setAnimating(false)}\n            key={item.src}\n          >\n            <img src={item.src} alt={item.altText} />\n            <CarouselCaption class=\"carousel-caption\" captionText={item.caption} captionHeader={item.caption} />\n          </CarouselItem>\n        );\n      });\n  \n    useEffect (() => {\n      // use the request-promise library to fetch the HTML from\n      chrome.tabs.query({active: true, lastFocusedWindow: true}, tabs => {\n          if (tabs.length > 0) {\n            console.log(tabs);\n            let _url = tabs[0].url;\n            setUrl(_url);\n            rp(\"http://localhost:8080/\" + _url)\n                .then(html => {\n                    var m = [];\n                    //console.log(html);\n                    if (html.includes(\"cotton\")) {\n                        console.log(\"cotton\");\n                        m.push(\"cotton\");\n                    }\n                    if (html.includes(\"polyester\")) {\n                        console.log(\"polyester\");\n                        m.push(\"polyester\");\n                    }\n                    if (html.includes(\"wool\")) {\n                        console.log(\"wool\");\n                        m.push(\"wool\");\n                    }\n                    setMaterials(m);\n                    setNumMats(m.length);\n                    if (m.length > 0) {\n                        setNoMats(false);\n                    } else {\n                        setNoMats(true);\n                    }\n                })\n                .catch(error => setMaterials([]))\n            }\n      });\n    })\n\n    if (materials.length == 0) {\n        return (\n            <ErrorPage />\n        );\n    }\n    else {\n        return (\n            <Carousel\n                activeIndex={activeIndex}\n                next={next}\n                previous={previous}\n                >\n                <CarouselIndicators items={items} activeIndex={activeIndex} onClickHandler={goToIndex} />\n                {slides}\n                <CarouselControl direction=\"prev\" directionText=\"Previous\" onClickHandler={previous} />\n                <CarouselControl direction=\"next\" directionText=\"Next\" onClickHandler={next} />\n            </Carousel>\n        );\n    } \n  }\n  \n  export default WebScrape;"]},"metadata":{},"sourceType":"module"}